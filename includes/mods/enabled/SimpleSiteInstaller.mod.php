<?php
if(SIMPLESITE!=1)
	die("Can't access this file directly.");
class SimpleSiteInstaller extends SimpleModule
{
	public static $info=array(  "author"  => "Jon Stockton",
				    "name"=> "SimpleSite Installer",
				    "version" => "0.1",
				    "date"=> "September 29, 2014"
	);

	public function isInstalled()
	{
		return true;
	}
	public function install()
	{
		return true;
	}
	public function uninstall()
	{
		return true;
	}
	public function getContent($configs=array())
	{
		$configPage=$this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/SimpleSiteInstaller.template","SimpleSiteInstaller");
		$content="";
		$configurationFile="";
		if(isset($_POST['uri_path']))
		{
			$testEnvTemplate=file_get_contents($_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/SimpleSiteInstaller_testEnv.template");

			$configs=$configs;
			$configs['path']['root']="/".$_POST['uri_path'];
			$configs['database']['type']=$_POST['dbtype'];
			$configs['database']['user']=$_POST['dbuser'];
			$configs['database']['password']=$_POST['dbpass'];
			$configs['database']['host']=$_POST['dbhost'];
			$configs['database']['tbl_prefix']=$_POST['dbtblprefix'];

			$this->db=new SimpleDB($configs['database']);
			try
			{
				$this->db->connect();
			}
			catch(Exception $e)
			{
				SimpleDebug::logException($e);
				$content=adminCP::testEnvironment($testEnvTemplate, $configs);
				return $content.$configPage;
			}
			$content=adminCP::testEnvironment($testEnvTemplate, $configs);
			$configurationFile=$this->parseTemplate(base64_decode("PD9waHANCi8qDQogKiAgICBTaW1wbGVTaXRlIENvbmZpZ3VyYXRpb24gRmlsZSB2Mi4xOiBEZWZpbmUgbmVjZXNzYXJ5IHZhcmlhYmxlcy4NCiAqICAgIENvcHlyaWdodCAoQykgMjAxNCBKb24gU3RvY2t0b24NCiAqDQogKiAgICBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQ0KICogICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkNCiAqICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yDQogKiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLg0KICoNCiAqICAgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLA0KICogICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YNCiAqICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUNCiAqICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuDQogKg0KICogICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UNCiAqICAgIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+Lg0KICovDQppZighU0lNUExFU0lURSkNCglkaWUoIkNhbid0IGFjY2VzcyB0aGlzIGZpbGUgZGlyZWN0bHkuIik7DQoNCnNldF9leGNlcHRpb25faGFuZGxlcigiU2ltcGxlRGVidWc6OmV4Y2VwdGlvbkhhbmRsZXIiKTsgLy8gQWxsb3cgbG9nZ2luZyBvZiB1bmNhdWdodCBleGNlcHRpb25zDQoNCi8vIEluaXRpYWxpemUgY29uZmlnIGFycmF5IGFuZCBzdXBlci1nbG9iYWwgYXJyYXlzDQpTaW1wbGVEZWJ1Zzo6bG9nSW5mbygiQ2hlY2tpbmcgc3VwZXItZ2xvYmFscy4uLiIpOw0KaWYoIWlzc2V0KCRfU0VSVkVSKSkNCnsNCglTaW1wbGVEZWJ1Zzo6bG9nSW5mbygiSW5pdGlhbGl6aW5nICRfU0VSVkVSLiIpOw0KCWdsb2JhbCAkX1NFUlZFUjsNCgkkX1NFUlZFUj1hcnJheSgpOw0KCSRfU0VSVkVSWydET0NVTUVOVF9ST09UJ109X19ESVJfXzsNCgkkX1NFUlZFUlsnUkVNT1RFX0FERFInXT0iMC4wLjAuMCI7DQp9DQppZighaXNzZXQoJF9HRVQpKQ0Kew0KCVNpbXBsZURlYnVnOjpsb2dJbmZvKCJJbml0aWFsaXppbmcgJF9HRVQuIik7DQoJZ2xvYmFsICRfR0VUOw0KCSRfR0VUPWFycmF5KCk7DQp9DQppZighaXNzZXQoJF9QT1NUKSkNCnsNCglTaW1wbGVEZWJ1Zzo6bG9nSW5mbygiSW5pdGlhbGl6aW5nICRfUE9TVC4iKTsNCglnbG9iYWwkX1BPU1Q7DQoJJF9QT1NUPWFycmF5KCk7DQp9DQppZighaXNzZXQoJF9SRVFVRVNUKSkNCnsNCglTaW1wbGVEZWJ1Zzo6bG9nSW5mbygiSW5pdGlhbGl6aW5nICRfUkVRVUVTVC4iKTsNCglnbG9iYWwgJF9SRVFVRVNUOw0KCSRfUkVRVUVTVD1hcnJheV9tZXJnZSgkX0dFVCwgJF9QT1NUKTsNCn0NCmlmKCFpc3NldCgkX1NFU1NJT04pKQ0Kew0KCVNpbXBsZURlYnVnOjpsb2dJbmZvKCJJbml0aWFsaXppbmcgJF9TRVNTSU9OLiIpOw0KCSRHTE9CQUxTWyJfU0VTU0lPTiJdPWFycmF5KCk7DQp9DQokY29uZmlncz1hcnJheSgpOw0KDQoNCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAqICAgIERpc3BsYXkgQ29uZmlndXJhdGlvbnMgICAgICoNCiAqICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICAgICoNCiAqIFNIT1VMRCBOT1QgQkUgTUFOVUFMTFkgRURJVEVEICoNCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQpTaW1wbGVEZWJ1Zzo6bG9nSW5mbygiU2V0dGluZyBkaXNwbGF5IGNvbmZpZ3VyYXRpb25zLiIpOw0KJGNvbmZpZ3NbImRlZmF1bHRfdGhlbWUiXT0idGhlQmFzaWNzIjsNCiRjb25maWdzWyJkZWZhdWx0X21vZCJdPSIiOw0KJGNvbmZpZ3NbImRlZmF1bHRfY29udHJvbGxlciJdPSJEZWZhdWx0U2l0ZSI7DQoNCg0KDQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXRoIENvbmZpZ3VyYXRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAkY29uZmlnc1sicGF0aCJdWyJyb290Il0gICAgICAgICAgICAgLSBUaGlzIHNob3VsZCBiZSBjaGFuZ2VkIHRvIHRoZSBwYXRoIHRvIFNpbXBsZVNpdGUgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbiB5b3VyIHNpdGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodHRwOi8vd3d3LnNpdGUuY29tL1NpbXBsZVNpdGUvIHdvdWxkIGJlICIvU2ltcGxlU2l0ZS8iICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAkY29uZmlnc1sicGF0aCJdWyJ0aGVtZXMiXSAgICAgICAgICAgLSBUaGlzIHNob3VsZCBiZSB0aGUgcGF0aCB0byBTaW1wbGVTaXRlIHRoZW1lcyAgICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAkY29uZmlnc1sicGF0aCJdWyJtb2RfdGVtcGxhdGVzIl0gICAgLSBUaGlzIGlzIHRoZSBwYXRoIHRvIHRoZSBtb2R1bGUgdGVtcGxhdGUgZmlsZXMgICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAkY29uZmlnc1sicGF0aCJdWyJjdXN0b21fdGVtcGxhdGVzIl0gLSBUaGlzIHNob3VsZCBiZSB0aGUgcGF0aCB0byB0aGUgY3VzdG9tIHRlbXBsYXRlcyAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGljaCBhcmUgdGVtcGxhdGVzIHlvdSB3YW50IHRvIHVzZSByZWdhcmRsZXNzIG9mIHRoZW1lLiAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAkY29uZmlnc1sicGF0aCJdWyJpbmNsdWRlcyJdICAgICAgICAgLSBOb3JtYWxseSB3aWxsIG5vdCBuZWVkIHRvIGJlIGVkaXRlZCwgYnV0IGl0IGlzIHRoZSAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RvcnkgeW91IHdvdWxkIGxpa2UgdG8gbG9hZCBjbGFzc2VzLCBldGMuIGZyb20gICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VmdWwgZm9yIHNlcGFyYXRpbmcgYmFjay1lbmQgZGV2ZWxvcG1lbnQgcHJvamVjdHMgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAkY29uZmlnc1sicGF0aCJdWyJ0bXBkaXIiXSAgICAgICAgICAgLSBTaG91bGQgbm90IG5lZWQgdG8gYmUgZWRpdGVkLCBqdXN0IHdoZXJlIHRoZSAgICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wb3JhcnkgZmlsZXMgYXJlIHN0b3JlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAkY29uZmlnc1sicGF0aCJdWyJ0ZW1wbGF0ZXMiXSAgICAgICAgLSBEb24ndCBlZGl0IHVubGVzcyB5b3Uga25vdyB3aGF0IHlvdSdyZSBkb2luZywgcHJldmlvdXMgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9ucyBnZW5lcmF0ZSB0aGlzIHZhbHVlICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KU2ltcGxlRGVidWc6OmxvZ0luZm8oIlNldHRpbmcgcGF0aCBjb25maWd1cmF0aW9ucy4iKTsNCiRjb25maWdzWyJwYXRoIl1bInJvb3QiXT0iL3tQT1NUX3VyaV9wYXRofSI7DQokY29uZmlnc1sicGF0aCJdWyJ0aGVtZXMiXT0idGVtcGxhdGVzL3RoZW1lcyI7DQokY29uZmlnc1sicGF0aCJdWyJtb2RfdGVtcGxhdGVzIl09InRlbXBsYXRlcy9tb2RzIjsNCiRjb25maWdzWyJwYXRoIl1bImN1c3RvbV90ZW1wbGF0ZXMiXT0idGVtcGxhdGVzL2N1c3RvbSI7DQoNClNpbXBsZURlYnVnOjpsb2dJbmZvKCJTZXR0aW5nIGR5bmFtaWNhbGx5IGdlbmVyYXRlZCBwYXRoIGNvbmZpZ3VyYXRpb25zLiIpOw0KLy8gVGhlIGZvbGxvd2luZyBjb25maWd1cmF0aW9ucyBzaG91bGQgbm90IGJlIGNoYW5nZWQgdW5sZXNzIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZyBhcyB0aGV5IGFyZSBkeW5hbWljYWxseSBzZXQNCi8vIFNldCB1cCBzdXBlci1nbG9iYWxzIGluIGNhc2UgdGhleSBhcmVuJ3QgYWxyZWFkeSBkZWZpbmVkDQovLyBOb3RlLCBpbiB0aGUgY2FzZSBvZiB0aGlzIGJlaW5nIGNhbGxlZCB0aHJvdWdoIGEgc3ltbGluaywNCi8vIHRoZSBwYXRoIGl0IHBvaW50cyB0byBpcyB3aGF0IGlzIGRlZmluZWQgaGVyZQ0KLy8gSG93ZXZlciBzaW5jZSBib3RoIHNpdHVhdGlvbnMgYXJlIGVkZ2UgY2FzZXMgZm9yIG5vdyB0aGlzIHdvcmtzDQppZighaXNzZXQoJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXSkpDQp7DQoJJGRpckFycj1hcnJheSgpOw0KCSR0bXBEaXJBcnI9ZXhwbG9kZSgkY29uZmlnc1sncGF0aCddWydyb290J10sIF9fRElSX18uIi8iKTsNCgkkdG1wQXJyQ250PWNvdW50KCR0bXBEaXJBcnIpOw0KCSRjdXJTcG90PTA7DQoNCglpZigkdG1wQXJyQ250PjEpDQoJew0KCQlmb3JlYWNoKCR0bXBEaXJBcnIgYXMgJGRpcmVjdG9yeSkNCgkJew0KCQkJaWYoICAkY3VyU3BvdCA8ICR0bXBBcnJDbnQpDQoJCQl7DQoJCQkJJGRpckFycltdPSRkaXJlY3Rvcnk7DQoJCQl9DQoJCQllbHNlDQoJCQkJYnJlYWs7DQoJCX0NCgl9DQoNCgkkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddPWltcGxvZGUoJGNvbmZpZ3NbJ3BhdGgnXVsncm9vdCddLCRkaXJBcnIpOw0KCVNpbXBsZURlYnVnOjpsb2dJbmZvKCJTZXR0aW5nIERPQ1VNRU5UX1JPT1QgdG8gJHtTRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXX0uIik7DQp9DQokY29uZmlnc1sicGF0aCJdWyJpbmNsdWRlcyJdPSRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10uJGNvbmZpZ3NbJ3BhdGgnXVsncm9vdCddLiJpbmNsdWRlcy8iOw0KJGNvbmZpZ3NbInBhdGgiXVsidG1wZGlyIl09JF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXS4kY29uZmlnc1sncGF0aCddWydyb290J10uIi90bXAvIjsNCiRjb25maWdzWyJwYXRoIl1bInRlbXBsYXRlcyJdPSRjb25maWdzWyJwYXRoIl1bInRoZW1lcyJdLiIvIi4oQCgkX1NFU1NJT05bJ3NlbGVjdGVkX3RoZW1lJ109PSIiKT8kY29uZmlnc1snZGVmYXVsdF90aGVtZSddOiRfU0VTU0lPTlsnc2VsZWN0ZWRfdGhlbWUnXSk7DQokY29uZmlnc1sicGF0aCJdWyJjb25maWdzIl09X19GSUxFX187DQoNCg0KDQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFiYXNlIENvbmZpZ3VyYXRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAkY29uZmlnc1siZGF0YWJhc2UiXVsidHlwZSJdICAgICAgICAgLSBUaGlzIGlzIHRoZSB0eXBlIG9mIGRhdGFiYXNlIHlvdSBwbGFuIHRvIHVzZSwgbWF5IGJlOiAgICAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTXlTUUwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TU1FMICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPcmFjbGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICRjb25maWdzWyJkYXRhYmFzZSJdWyJ1c2VybmFtZSJdICAgICAtIFRoZSB1c2VybmFtZSB5b3UgdXNlIHRvIGxvZyBpbnRvIHRoZSBkYXRhYmFzZSAtIGlmIG5vIERCICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcyBiZWluZyB1c2VkLCB0aGlzIHdpbGwgYmUgeW91ciBsb2dpbiBmb3IgdGhlIGFkbWluQ1AgICAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICRjb25maWdzWyJkYXRhYmFzZSJdWyJwYXNzd29yZCJdICAgICAtIFRoZSBwYXNzd29yZCB5b3UgdXNlIHRvIGxvZyBpbnRvIHRoZSBkYXRhYmFzZSAtIGlmIG5vIERCICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcyBiZWluZyB1c2VkLCB0aGlzIHdpbGwgYmUgeW91ciBwYXNzd29yZCBmb3IgdGhlIGFkbWluQ1AgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICRjb25maWdzWyJkYXRhYmFzZSJdWyJkYXRhYmFzZSJdICAgICAtIFRoaXMgaXMgdGhlIGRhdGFiYXNlIHlvdSB3YW50IHRvIHVzZSBhZnRlciBjb25uZWN0aW5nIHRvICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgU1FMIHNlcnZlciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICRjb25maWdzWyJkYXRhYmFzZSJdWyJ0YmxfcHJlZml4Il0gICAtIFRoZSBwcmVmaXggdG8gdXNlIGluIGZyb250IG9mIGFsbCBkZWZhdWx0IHRhYmxlcyAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQpTaW1wbGVEZWJ1Zzo6bG9nSW5mbygiU2V0dGluZyBkYXRhYmFzZSBjb25maWdzLiIpOw0KJGNvbmZpZ3NbImRhdGFiYXNlIl09YXJyYXkoKTsNCiRjb25maWdzWyJkYXRhYmFzZSJdWyJ0eXBlIl09IntQT1NUX2RidHlwZX0iOw0KJGNvbmZpZ3NbImRhdGFiYXNlIl1bImhvc3QiXT0ie1BPU1RfZGJob3N0fSI7DQokY29uZmlnc1siZGF0YWJhc2UiXVsidXNlcm5hbWUiXT0ie1BPU1RfZGJ1c2VyfSI7DQokY29uZmlnc1siZGF0YWJhc2UiXVsicGFzc3dvcmQiXT0ie1BPU1RfZGJwYXNzfSI7DQokY29uZmlnc1siZGF0YWJhc2UiXVsiZGF0YWJhc2UiXT0ie1BPU1RfZGJkYn0iOw0KJGNvbmZpZ3NbImRhdGFiYXNlIl1bInRibF9wcmVmaXgiXT0ie1BPU1RfZGJ0YmxwcmVmaXh9IjsNCg0KLy8gQXJyYXkgb2YgSVAgYWRkcmVzc2VzIGJsb2NrZWQNCiRjb25maWdzWyJibG9ja2VkIl09YXJyYXkoKTsNClNpbXBsZURlYnVnOjpsb2dJbmZvKCJCbG9ja2luZyAiLmNvdW50KCRjb25maWdzWydibG9ja2VkJ10pLiIgcmVtb3RlIGhvc3RzLiIpOw0KDQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVidWdnaW5nIENvbmZpZ3VyYXRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAkY29uZmlnc1siZGVidWdnaW5nIl1bImxvdWQiXSAgICAgICAgICAgICAgLSBUaGlzIGlzIHRoZSBzZXR0aW5nIGZvciBTaW1wbGVEZWJ1ZyB0byBhdXRvbWF0aWNhbGx5ICoNCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0IGF0LiAgWW91IHNob3VsZCBsZWF2ZSBpdCBhdCAwIHNvIHRoYXQgaXQgY2FuICAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgZmlsdGVyZWQgYmFzZWQgb24gdGhlIHVzZXIuICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICRjb25maWdzWyJkZWJ1Z2dpbmciXVsic2F2ZWxvZyJdICAgICAgICAgICAtIEJvb2xlYW4gdmFsdWUgb2Ygd2hldGhlciB0byBzYXZlIHRoZSBsb2cgYXQgdGhlIGVuZCAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2YgZXhlY3V0aW9uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICRjb25maWdzWyJkZWJ1Z2dpbmciXVsibG9nZmlsZSJdICAgICAgICAgICAtIFNob3VsZCBub3QgbmVlZCB0byBiZSBjaGFuZ2VkLCBwdXQgaW50byB0bXAgZGlyIChpbiAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCBjb25maWdzKSB1bmRlciBuYW1lIFNpbXBsZURlYnVnLmxvZy4gICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICRjb25maWdzWyJkZWJ1Z2dpbmciXVsiZXJyb3JMZXZlbCJdICAgICAgICAtIEN1cnJlbnQgZXJyb3IgbGV2ZWwgb2YgdGhlIHN5c3RlbSwgc2hvdWxkIGJlIGxlZnQgYXQgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICRjb25maWdzWyJkZWJ1Z2dpbmciXVsiZm9ybWF0Il0gICAgICAgICAgICAtIEZvcm1hdCB0aGF0IHRoZSBkZWJ1ZyBvdXRwdXQgc2hvdWxkIGJlIGluLiAgICAgICAgICAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogKiAkY29uZmlnc1siZGVidWdnaW5nIl1bImV4Y2VwdGlvbl9mbXQiXSAgICAgLSBGb3JtYXQgdGhlIG1lc3NhZ2UgZm9yIGV4Y2VwdGlvbnMgc2hvdWxkIGJlIGluLiAgICAgICoNCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICogJGNvbmZpZ3NbImRlYnVnZ2luZyJdWyJ0aW1lX2Zvcm1hdCJdICAgICAgIC0gRm9ybWF0IHRoYXQgdGhlIGRhdGUvdGltZSBvdXRwdXQgc2hvdWxkIGJlIGluLiAgICAgICAqDQogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQpTaW1wbGVEZWJ1Zzo6bG9nSW5mbygiU2V0dGluZyBkZWJ1Z2dpbmcgY29uZmlncy4iKTsNCiRjb25maWdzWyJkZWJ1Z2dpbmciXVsibG91ZCJdPTA7DQokY29uZmlnc1siZGVidWdnaW5nIl1bInNhdmVsb2ciXT10cnVlOw0KJGNvbmZpZ3NbImRlYnVnZ2luZyJdWyJsb2dmaWxlIl09JGNvbmZpZ3NbInBhdGgiXVsidG1wZGlyIl0uIlNpbXBsZURlYnVnLmxvZyI7DQokY29uZmlnc1siZGVidWdnaW5nIl1bImVycm9yTGV2ZWwiXT0wOw0KJGNvbmZpZ3NbImRlYnVnZ2luZyJdWyJmb3JtYXQiXT0iRGJnOiB7VFlQRX06ICN7SUR9ICh7VElNRX0pOiB7TUVTU0FHRX0iOw0KJGNvbmZpZ3NbImRlYnVnZ2luZyJdWyJleGNlcHRpb25fZm10Il09IntNRVNTQUdFfSBpbiB7RklMRX0gb24gbGluZSB7TElORX0gLSBiYWNrdHJhY2UgSlNPTjoge0JBQ0tUUkFDRX0iOw0KJGNvbmZpZ3NbImRlYnVnZ2luZyJdWyJ0aW1lX2Zvcm1hdCJdPSJtL2QvWSBIOmk6cyI7DQpTaW1wbGVEZWJ1Zzo6c2V0U2V0dGluZ3MoJGNvbmZpZ3NbJ2RlYnVnZ2luZyddLCB0cnVlKTsgLy8gUHV0IHRoZXNlIHNldHRpbmdzIGFuZCBwcm9wb2dhdGUgdG8gYW55IGV4aXN0aW5nIGluc3RhbmNlcw0KDQoNCiRsb2FkRGlzYWJsZWQ9ZmFsc2U7IC8vIFdoZXRoZXIgdGhlIGF1dG9sb2FkZXIgc2hvdWxkIGxvb2sgYXQgZGlzYWJsZWQgbW9kdWxlcyBvciBub3QNCj8+", "SimpleSiteInstaller"));
		}
		if($_POST['dirty']=="true")
			$content.="<br/><br/><b>If you are sure that this is the configuration that you want to be set, copy and paste the text from below into the configuration file editor in adminCP:</b><br/><textarea>$configurationFile</textarea><br/><br/>";
		return $content.$configPage;
	}
}
?>
