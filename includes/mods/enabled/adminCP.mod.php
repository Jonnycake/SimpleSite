<?php
/*
 *    SimpleSite AdminCP Module v1.0: Admin page for a SimpleSite-based website.
 *    Copyright (C) 2012 Jon Stockton
 * 
 *    This program is free software: you can redistribute it and/or modify
 *    it under the terms of the GNU General Public License as published by
 *    the Free Software Foundation, either version 3 of the License, or
 *    (at your option) any later version.
 *
 *    This program is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *    GNU General Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License
 *    along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
if(SIMPLESITE!=1)
	die("Can't access this file directly.");
class adminCP extends SimpleDisplay implements simpleModule
{
	public static $info=array( "author"  => "Jon Stockton",
						"name"    => "SimpleAdmin",
						"version" => "1.0",
						"date"    => "November 22, 2012"
					 );
	public function sideparse($content,$configs=array())
	{
		if($_SESSION['is_admin'])
			switch($_GET['act'])
			{
				case "dbAdmin":
					$content=$this->dbAdmin($content,$configs);
					$content=str_replace("{QUERYSUCCESS}","",$content);
					break;
				case "modAdmin":
					$content=$this->modAdmin($content,$configs);
					break;
				case "configAdmin":
					$content=$this->configAdmin($content,$configs);
					break;
				case "templateAdmin":
					$content=$this->templateAdmin($content,$configs);
					break;
				case "themeMgr":
					$content=$this->themeMgr($content,$configs);
					break;
				case "testEnv":
					$content=$this->testEnvironment($content,$configs);
					break;
				case "widgetAdmin":
					$content=$this->widgetAdmin($content,$configs);
					break;
			}
		else
		{
			if($_GET['act']=="login")
				$content=str_replace("{LOGINSUCCESS}","Login failed, please try again.",$content);
			else
				$content=str_replace("{LOGINSUCCESS}","",$content);
		}
			
		if((preg_match("/{ACTIONPAGE}/si",$content,$match)))
			$content=str_replace("{ACTIONPAGE}",$this->getActionPage($configs),$content);
		return $content;
	}
	public function choosePage($configs=array())
	{
		if($_GET['act']=="login")
		{
			$dbconf=$configs['database'];
			$conn=@mysql_connect($dbconf['host'],$dbconf['username'],$dbconf['password']);
			mysql_select_db($dbconf['database'],$conn);
			$res=@mysql_query("SELECT * FROM ${dbconf['tbl_prefix']}admins WHERE username='".mysql_real_escape_string($_POST['username'])."' AND passwd='".md5($_POST['password'])."';");
			if(mysql_num_rows($res))
				$_SESSION['is_admin']=1;
			mysql_close($conn);
		}
		else if($_GET['act']=="logout")
		{
			$_SESSION['is_admin']=0;
		}
		return "";
	}
	public function isInstalled($configs=array())
	{
		$reqFiles=array(
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP.template",
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_configAdmin.template",
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_dbAdmin.template",
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_dbAdmin_table.template",
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_login.template",
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_modAdmin.template",
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_modAdmin_modules.template",
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_templateAdmin.template",
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_testEnv.template",
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_themeMgr.template",
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_welcome.template",
				$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_widgetAdmin.template"
			       );
		$reqTbls=array(
				"admins"
			      );
			      
		// Check for required files
		if(!($this->checkReqFiles($reqFiles,$configs)))
			return FALSE;
		
		// Check for required MySQL tables
		if(!($this->checkReqTbls($reqTbls,$configs)))
			return FALSE;
		return TRUE;
	}
	public function install($configs=array())
	{
		$defaultTbls=array(
					"admins" => array(
								"id" => "int NOT NULL AUTO_INCREMENT PRIMARY KEY",
								"username" => "varchar(255) NOT NULL UNIQUE",
								"passwd" => "varchar(33) NOT NULL"
							)
				);
		$defaultFiles=array(
			"adminCP.template" => "CQkJCQk8ZGl2IGlkPSJtYWluY29udGVudCIgc3R5bGU9IndpZHRoOjgwJTtmbG9hdDpyaWdodDsiPg0NCgkJCQkJCXtBQ1RJT05QQUdFfQ0NCgkJCQkJPC9kaXY+DQ0KCQkJCQk8ZGl2IGlkPSJvcHRpb25zIiBzdHlsZT0id2lkdGg6MjAlOyI+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9Y29uZmlnQWRtaW4iPkNvbmZpZ3VyYXRpb25zPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9ZGJBZG1pbiI+RGF0YWJhc2UgQWRtaW48L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1tb2RBZG1pbiI+TW9kdWxlIEFkbWluPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9dGVtcGxhdGVBZG1pbiI+VGVtcGxhdGUgQWRtaW48L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10aGVtZU1nciI+VGhlbWUgTWFuYWdlcjwvYT48YnIvPg0NCgkJCQkJCTxhIGhyZWY9IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PXRlc3RFbnYiPlRlc3QgRW52aXJvbm1lbnQ8L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD13aWRnZXRBZG1pbiI+V2lkZ2V0IEFkbWluPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9bG9nb3V0Ij5Mb2dvdXQ8L2E+DQ0KCQkJCQk8L2Rpdj4NDQo=",
			"adminCP_configAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTsiPg0KCTxzcGFuPjxiPkJlIHZlcnkgY2FyZWZ1bCB3aGVuIGVkaXRpbmcgdGhpcyBmaWxlLCBpZiB5b3UgZG8gc29tZXRoaW5nIHdyb25nIHlvdSBjb3VsZCBicmVhayB0aGUgYWRtaW5pc3RyYXRpdmUgY29udHJvbCBwYW5lbC48L2I+PC9zcGFuPg0KCTxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1jb25maWdBZG1pbiZmdW5jPXNhdmUiPg0KCQk8dGV4dGFyZWEgbmFtZT0iZmlsZWNvbnRlbnQiIHN0eWxlPSJ3aWR0aDoxMDAlOyIgcm93cz0iMjAiPntGSUxFQ09OVEVOVH08L3RleHRhcmVhPg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iU2F2ZSIvPg0KCTwvZm9ybT4NCjwvZGl2Pg0K",
			"adminCP_dbAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PWRiQWRtaW4mZnVuYz1kYlNlbGVjdCIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJCTxzZWxlY3QgbmFtZT0iZGJuYW1lIj4NCgkJCXtEQVRBQkFTRVN9DQoJCTwvc2VsZWN0Pg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iQWNjZXNzIi8+DQoJPC9mb3JtPg0KCTxici8+PGJyLz4NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PWRiQWRtaW4mZnVuYz10YmxJbnRlcmFjdCIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJxdWVyeSIgdmFsdWU9IiIvPg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHZhbHVlPSJRdWVyeSIvPg0KCTwvZm9ybT48YnIvPg0KCTxzcGFuPntRVUVSWVNVQ0NFU1N9PC9zcGFuPg0KCTxici8+PGJyLz4NCgkJe1RBQkxFU30NCjwvZGl2Pg0K",
			"adminCP_dbAdmin_table.template" => "PGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1kYkFkbWluJmZ1bmM9dGJsSW50ZXJhY3QiIG1ldGhvZD0icG9zdCI+DQoJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0idGJsTmFtZSIgdmFsdWU9IntUQkxOQU1FfSIvPg0KCTx0YWJsZSBzdHlsZT0ibWFyZ2luLWJvdHRvbToyMHB4OyI+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSJ7TlVNQ09MU30iIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPntUQkxOQU1FfTwvdGQ+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCXtDT0xOQU1FU30gPCEtLS0gQUxURVIgVEFCTEUgLS0tPg0KCQk8L3RyPg0KCQk8dHI+DQoJCQl7VkFMVUVTfSA8IS0tLSBVUERBVEUvREVMRVRFIC0tLT4NCgkJPC90cj4NCgkJPHRyPg0KCQkJe0lOUFVUU30gPCEtLS0gSU5TRVJUUyAtLS0+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSJ7TlVNQ09MU30iIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPjxpbnB1dCB0eXBlPSJzdWJtaXQiIG5hbWU9InN1Ym1pdCIgc3R5bGU9IndpZHRoOjMwJTsiIHZhbHVlPSJJTlNFUlQiLz48aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHN0eWxlPSJ3aWR0aDozMCU7IiB2YWx1ZT0iVVBEQVRFIi8+PGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0ic3VibWl0IiBzdHlsZT0id2lkdGg6MzAlOyIgdmFsdWU9IkRFTEVURSIvPjwvdGQ+DQoJCTwvdHI+DQoJPC90YWJsZT4NCjwvZm9ybT4NCg==",
			"adminCP_login.template" => "PGRpdiBzdHlsZT0id2lkdGg6MTAwJTt0ZXh0LWFsaWduOmNlbnRlcjsiPg0KCXtMT0dJTlNVQ0NFU1N9DQoJPGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1sb2dpbiIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InVzZXJuYW1lIiB2YWx1ZT0iVXNlcm5hbWUiIG9uY2xpY2s9InRoaXMudmFsdWU9Jyc7Ii8+PGJyLz4NCgkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwYXNzd29yZCIgdmFsdWU9IlBhc3N3b3JkIiBvbmNsaWNrPSJ0aGlzLnZhbHVlPScnOyIvPjxici8+DQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJMb2dpbiI+DQoJPC9mb3JtPg0KPC9kaXY+DQo=",
			"adminCP_modAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4NCgk8dGFibGU+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSI0IiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij5BdmFpbGFibGUgTW9kdWxlczwvdGQ+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCTx0ZD5OYW1lOjwvdGQ+PHRkPkF1dGhvcjo8L3RkPjx0ZD5EYXRlIENyZWF0ZWQ6PC90ZD48dGQ+RW5hYmxlZDo8L3RkPg0KCQk8L3RyPg0KCQl7TU9EVUxFU30NCgk8L3RhYmxlPg0KCTxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9bW9kQWRtaW4mZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+DQoJCTxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJyZmlsZSIvPjxici8+DQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJVcGxvYWQiLz4NCgk8L2Zvcm0+DQo8L2Rpdj4NCg==",
			"adminCP_modAdmin_modules.template" => "PHRyPg0KCTx0ZD57TkFNRX08L3RkPjx0ZD57QVVUSE9SfTwvdGQ+PHRkPntEQVRFfTwvdGQ+PHRkPjxhIGhyZWY9IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PW1vZEFkbWluJmZ1bmM9dG9nZ2xlRW5hYmxlZCZtb2R1bGU9e01PREZJTEV9JmN1cnJlbnRTdGF0ZT17RU5BQkxFRH0iPntFTkFCTEVEfTwvYT48L3RkPg0KPC90cj4NCg==",
			"adminCP_templateAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTsiPg0NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PXRlbXBsYXRlQWRtaW4mZnVuYz1sb2FkIiBtZXRob2Q9InBvc3QiPg0NCgkJPHNlbGVjdCBuYW1lPSJmaWxlbmFtZSI+DQ0KCQkJPG9wdGlvbiB2YWx1ZT0iIj5DdXJyZW50IFRoZW1lIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7VEVNUEZJTEVTfQ0NCgkJCTxvcHRpb24gdmFsdWU9IiI+IDwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+TW9kdWxlIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7TU9EVEVNUEZJTEVTfQ0NCgkJCTxvcHRpb24gdmFsdWU9IiI+IDwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+Q3VzdG9tIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7Q1VTVE9NVEVNUExBVEVTfQ0NCgkJPC9zZWxlY3Q+PGJyLz4NDQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJFZGl0Ii8+DQ0KCTwvZm9ybT4NDQoJPGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10ZW1wbGF0ZUFkbWluIiBtZXRob2Q9InBvc3QiPg0NCgkJPHRleHRhcmVhIHN0eWxlPSJ3aWR0aDoxMDAlOyIgcm93cz0iMjAiIG5hbWU9ImZpbGVjb250ZW50Ij57RklMRUNPTlRFTlR9PC90ZXh0YXJlYT48YnIvPg0NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iZmlsZW5hbWUiIHZhbHVlPSJ7VEVNUEZJTEV9Ii8+DQ0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHZhbHVlPSJTYXZlIi8+PGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0ic3VibWl0IiB2YWx1ZT0iRGVsZXRlIi8+DQ0KCTwvZm9ybT4NDQo8L2Rpdj4NDQo=",
			"adminCP_testEnv.template" => "PGxpPg0Ke0RFUEVOREVOQ0lFU30NCjwvbGk+DQo=",
			"adminCP_themeMgr.template" => "PGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10aGVtZU1nciZmdW5jPXNldFRoZW1lIiBtZXRob2Q9InBvc3QiPg0KCTxzZWxlY3QgbmFtZT0iZmlsZW5hbWUiPg0Ke1RIRU1FU30NCgk8L3NlbGVjdD48YnIvPg0KCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJTZXQgVGhlbWUiLz4NCjwvZm9ybT4NCjxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9dGhlbWVNZ3ImZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+DQoJPGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9InJmaWxlIi8+PGJyLz4NCgk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iVXBsb2FkIFRoZW1lIi8+DQo8L2Zvcm0+DQo=",
			"adminCP_welcome.template" => "V2VsY29tZSB0byB0aGUgU2ltcGxlU2l0ZSBhZG1pbmlzdHJhdG9yIGNvbnRyb2wgcGFuZWwuICBQbGVhc2Ugc2VsZWN0IGEgc2VjdGlvbiBmcm9tIHRoZSBsZWZ0Lg0K",
			"adminCP_widgetAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4KCTxmb3JtIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9d2lkZ2V0QWRtaW4mZnVuYz1kZWxldGUiIG1ldGhvZD0icG9zdCI+CgkJPHRhYmxlPgoJCQk8dHI+CgkJCQk8dGQgY29sc3Bhbj0iMyIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+V2lkZ2V0cyBBdmFpbGFibGU8L3RkPgoJCQk8L3RyPgoJCQk8dHI+CgkJCQk8dGQ+TmFtZTo8L3RkPjx0ZD5UZW1wbGF0ZSBDb25zdGFudDo8L3RkPjx0ZD5EYXRlIEFkZGVkOjwvdGQ+CgkJCTwvdHI+CgkJCXtXSURHRVRTfQoJCQk8dHI+CgkJCQk8dGQgY29sc3Bhbj0iMyIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+PGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IkRlbGV0ZSIvPjwvdGQ+CgkJCTwvdHI+CgkJPC90YWJsZT4KCTwvZm9ybT4KCTxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9d2lkZ2V0QWRtaW4mZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+CgkJPGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9InJmaWxlIi8+PGJyLz4KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iVXBsb2FkIi8+Cgk8L2Zvcm0+CjwvZGl2Pgo=",
			"adminCP.template" => "CQkJCQk8ZGl2IGlkPSJtYWluY29udGVudCIgc3R5bGU9IndpZHRoOjgwJTtmbG9hdDpyaWdodDsiPg0NCgkJCQkJCXtBQ1RJT05QQUdFfQ0NCgkJCQkJPC9kaXY+DQ0KCQkJCQk8ZGl2IGlkPSJvcHRpb25zIiBzdHlsZT0id2lkdGg6MjAlOyI+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9Y29uZmlnQWRtaW4iPkNvbmZpZ3VyYXRpb25zPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9ZGJBZG1pbiI+RGF0YWJhc2UgQWRtaW48L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1tb2RBZG1pbiI+TW9kdWxlIEFkbWluPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9dGVtcGxhdGVBZG1pbiI+VGVtcGxhdGUgQWRtaW48L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10aGVtZU1nciI+VGhlbWUgTWFuYWdlcjwvYT48YnIvPg0NCgkJCQkJCTxhIGhyZWY9IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PXRlc3RFbnYiPlRlc3QgRW52aXJvbm1lbnQ8L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD13aWRnZXRBZG1pbiI+V2lkZ2V0IEFkbWluPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9bG9nb3V0Ij5Mb2dvdXQ8L2E+DQ0KCQkJCQk8L2Rpdj4NDQo=",
			"adminCP_configAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTsiPg0KCTxzcGFuPjxiPkJlIHZlcnkgY2FyZWZ1bCB3aGVuIGVkaXRpbmcgdGhpcyBmaWxlLCBpZiB5b3UgZG8gc29tZXRoaW5nIHdyb25nIHlvdSBjb3VsZCBicmVhayB0aGUgYWRtaW5pc3RyYXRpdmUgY29udHJvbCBwYW5lbC48L2I+PC9zcGFuPg0KCTxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1jb25maWdBZG1pbiZmdW5jPXNhdmUiPg0KCQk8dGV4dGFyZWEgbmFtZT0iZmlsZWNvbnRlbnQiIHN0eWxlPSJ3aWR0aDoxMDAlOyIgcm93cz0iMjAiPntGSUxFQ09OVEVOVH08L3RleHRhcmVhPg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iU2F2ZSIvPg0KCTwvZm9ybT4NCjwvZGl2Pg0K",
			"adminCP_dbAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PWRiQWRtaW4mZnVuYz1kYlNlbGVjdCIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJCTxzZWxlY3QgbmFtZT0iZGJuYW1lIj4NCgkJCXtEQVRBQkFTRVN9DQoJCTwvc2VsZWN0Pg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iQWNjZXNzIi8+DQoJPC9mb3JtPg0KCTxici8+PGJyLz4NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PWRiQWRtaW4mZnVuYz10YmxJbnRlcmFjdCIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJxdWVyeSIgdmFsdWU9IiIvPg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHZhbHVlPSJRdWVyeSIvPg0KCTwvZm9ybT48YnIvPg0KCTxzcGFuPntRVUVSWVNVQ0NFU1N9PC9zcGFuPg0KCTxici8+PGJyLz4NCgkJe1RBQkxFU30NCjwvZGl2Pg0K",
			"adminCP_dbAdmin_table.template" => "PGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1kYkFkbWluJmZ1bmM9dGJsSW50ZXJhY3QiIG1ldGhvZD0icG9zdCI+DQoJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0idGJsTmFtZSIgdmFsdWU9IntUQkxOQU1FfSIvPg0KCTx0YWJsZSBzdHlsZT0ibWFyZ2luLWJvdHRvbToyMHB4OyI+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSJ7TlVNQ09MU30iIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPntUQkxOQU1FfTwvdGQ+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCXtDT0xOQU1FU30gPCEtLS0gQUxURVIgVEFCTEUgLS0tPg0KCQk8L3RyPg0KCQk8dHI+DQoJCQl7VkFMVUVTfSA8IS0tLSBVUERBVEUvREVMRVRFIC0tLT4NCgkJPC90cj4NCgkJPHRyPg0KCQkJe0lOUFVUU30gPCEtLS0gSU5TRVJUUyAtLS0+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSJ7TlVNQ09MU30iIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPjxpbnB1dCB0eXBlPSJzdWJtaXQiIG5hbWU9InN1Ym1pdCIgc3R5bGU9IndpZHRoOjMwJTsiIHZhbHVlPSJJTlNFUlQiLz48aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHN0eWxlPSJ3aWR0aDozMCU7IiB2YWx1ZT0iVVBEQVRFIi8+PGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0ic3VibWl0IiBzdHlsZT0id2lkdGg6MzAlOyIgdmFsdWU9IkRFTEVURSIvPjwvdGQ+DQoJCTwvdHI+DQoJPC90YWJsZT4NCjwvZm9ybT4NCg==",
			"adminCP_login.template" => "PGRpdiBzdHlsZT0id2lkdGg6MTAwJTt0ZXh0LWFsaWduOmNlbnRlcjsiPg0KCXtMT0dJTlNVQ0NFU1N9DQoJPGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1sb2dpbiIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InVzZXJuYW1lIiB2YWx1ZT0iVXNlcm5hbWUiIG9uY2xpY2s9InRoaXMudmFsdWU9Jyc7Ii8+PGJyLz4NCgkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwYXNzd29yZCIgdmFsdWU9IlBhc3N3b3JkIiBvbmNsaWNrPSJ0aGlzLnZhbHVlPScnOyIvPjxici8+DQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJMb2dpbiI+DQoJPC9mb3JtPg0KPC9kaXY+DQo=",
			"adminCP_modAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4NCgk8dGFibGU+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSI0IiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij5BdmFpbGFibGUgTW9kdWxlczwvdGQ+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCTx0ZD5OYW1lOjwvdGQ+PHRkPkF1dGhvcjo8L3RkPjx0ZD5EYXRlIENyZWF0ZWQ6PC90ZD48dGQ+RW5hYmxlZDo8L3RkPg0KCQk8L3RyPg0KCQl7TU9EVUxFU30NCgk8L3RhYmxlPg0KCTxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9bW9kQWRtaW4mZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+DQoJCTxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJyZmlsZSIvPjxici8+DQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJVcGxvYWQiLz4NCgk8L2Zvcm0+DQo8L2Rpdj4NCg==",
			"adminCP_modAdmin_modules.template" => "PHRyPg0KCTx0ZD57TkFNRX08L3RkPjx0ZD57QVVUSE9SfTwvdGQ+PHRkPntEQVRFfTwvdGQ+PHRkPjxhIGhyZWY9IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PW1vZEFkbWluJmZ1bmM9dG9nZ2xlRW5hYmxlZCZtb2R1bGU9e01PREZJTEV9JmN1cnJlbnRTdGF0ZT17RU5BQkxFRH0iPntFTkFCTEVEfTwvYT48L3RkPg0KPC90cj4NCg==",
			"adminCP_templateAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTsiPg0NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PXRlbXBsYXRlQWRtaW4mZnVuYz1sb2FkIiBtZXRob2Q9InBvc3QiPg0NCgkJPHNlbGVjdCBuYW1lPSJmaWxlbmFtZSI+DQ0KCQkJPG9wdGlvbiB2YWx1ZT0iIj5DdXJyZW50IFRoZW1lIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7VEVNUEZJTEVTfQ0NCgkJCTxvcHRpb24gdmFsdWU9IiI+IDwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+TW9kdWxlIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7TU9EVEVNUEZJTEVTfQ0NCgkJCTxvcHRpb24gdmFsdWU9IiI+IDwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+Q3VzdG9tIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7Q1VTVE9NVEVNUExBVEVTfQ0NCgkJPC9zZWxlY3Q+PGJyLz4NDQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJFZGl0Ii8+DQ0KCTwvZm9ybT4NDQoJPGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10ZW1wbGF0ZUFkbWluIiBtZXRob2Q9InBvc3QiPg0NCgkJPHRleHRhcmVhIHN0eWxlPSJ3aWR0aDoxMDAlOyIgcm93cz0iMjAiIG5hbWU9ImZpbGVjb250ZW50Ij57RklMRUNPTlRFTlR9PC90ZXh0YXJlYT48YnIvPg0NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iZmlsZW5hbWUiIHZhbHVlPSJ7VEVNUEZJTEV9Ii8+DQ0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHZhbHVlPSJTYXZlIi8+PGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0ic3VibWl0IiB2YWx1ZT0iRGVsZXRlIi8+DQ0KCTwvZm9ybT4NDQo8L2Rpdj4NDQo=",
			"adminCP_testEnv.template" => "PGxpPg0Ke0RFUEVOREVOQ0lFU30NCjwvbGk+DQo=",
			"adminCP_themeMgr.template" => "PGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10aGVtZU1nciZmdW5jPXNldFRoZW1lIiBtZXRob2Q9InBvc3QiPg0KCTxzZWxlY3QgbmFtZT0iZmlsZW5hbWUiPg0Ke1RIRU1FU30NCgk8L3NlbGVjdD48YnIvPg0KCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJTZXQgVGhlbWUiLz4NCjwvZm9ybT4NCjxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9dGhlbWVNZ3ImZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+DQoJPGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9InJmaWxlIi8+PGJyLz4NCgk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iVXBsb2FkIFRoZW1lIi8+DQo8L2Zvcm0+DQo=",
			"adminCP_welcome.template" => "V2VsY29tZSB0byB0aGUgU2ltcGxlU2l0ZSBhZG1pbmlzdHJhdG9yIGNvbnRyb2wgcGFuZWwuICBQbGVhc2Ugc2VsZWN0IGEgc2VjdGlvbiBmcm9tIHRoZSBsZWZ0Lg0K",
			"adminCP_widgetAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4KCTxmb3JtIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9d2lkZ2V0QWRtaW4mZnVuYz1kZWxldGUiIG1ldGhvZD0icG9zdCI+CgkJPHRhYmxlPgoJCQk8dHI+CgkJCQk8dGQgY29sc3Bhbj0iMyIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+V2lkZ2V0cyBBdmFpbGFibGU8L3RkPgoJCQk8L3RyPgoJCQk8dHI+CgkJCQk8dGQ+TmFtZTo8L3RkPjx0ZD5UZW1wbGF0ZSBDb25zdGFudDo8L3RkPjx0ZD5EYXRlIEFkZGVkOjwvdGQ+CgkJCTwvdHI+CgkJCXtXSURHRVRTfQoJCQk8dHI+CgkJCQk8dGQgY29sc3Bhbj0iMyIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+PGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IkRlbGV0ZSIvPjwvdGQ+CgkJCTwvdHI+CgkJPC90YWJsZT4KCTwvZm9ybT4KCTxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9d2lkZ2V0QWRtaW4mZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+CgkJPGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9InJmaWxlIi8+PGJyLz4KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iVXBsb2FkIi8+Cgk8L2Zvcm0+CjwvZGl2Pgo=",
			"adminCP.template" => "CQkJCQk8ZGl2IGlkPSJtYWluY29udGVudCIgc3R5bGU9IndpZHRoOjgwJTtmbG9hdDpyaWdodDsiPg0NCgkJCQkJCXtBQ1RJT05QQUdFfQ0NCgkJCQkJPC9kaXY+DQ0KCQkJCQk8ZGl2IGlkPSJvcHRpb25zIiBzdHlsZT0id2lkdGg6MjAlOyI+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9Y29uZmlnQWRtaW4iPkNvbmZpZ3VyYXRpb25zPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9ZGJBZG1pbiI+RGF0YWJhc2UgQWRtaW48L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1tb2RBZG1pbiI+TW9kdWxlIEFkbWluPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9dGVtcGxhdGVBZG1pbiI+VGVtcGxhdGUgQWRtaW48L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10aGVtZU1nciI+VGhlbWUgTWFuYWdlcjwvYT48YnIvPg0NCgkJCQkJCTxhIGhyZWY9IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PXRlc3RFbnYiPlRlc3QgRW52aXJvbm1lbnQ8L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD13aWRnZXRBZG1pbiI+V2lkZ2V0IEFkbWluPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9bG9nb3V0Ij5Mb2dvdXQ8L2E+DQ0KCQkJCQk8L2Rpdj4NDQo=",
			"adminCP_configAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTsiPg0KCTxzcGFuPjxiPkJlIHZlcnkgY2FyZWZ1bCB3aGVuIGVkaXRpbmcgdGhpcyBmaWxlLCBpZiB5b3UgZG8gc29tZXRoaW5nIHdyb25nIHlvdSBjb3VsZCBicmVhayB0aGUgYWRtaW5pc3RyYXRpdmUgY29udHJvbCBwYW5lbC48L2I+PC9zcGFuPg0KCTxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1jb25maWdBZG1pbiZmdW5jPXNhdmUiPg0KCQk8dGV4dGFyZWEgbmFtZT0iZmlsZWNvbnRlbnQiIHN0eWxlPSJ3aWR0aDoxMDAlOyIgcm93cz0iMjAiPntGSUxFQ09OVEVOVH08L3RleHRhcmVhPg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iU2F2ZSIvPg0KCTwvZm9ybT4NCjwvZGl2Pg0K",
			"adminCP_dbAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PWRiQWRtaW4mZnVuYz1kYlNlbGVjdCIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJCTxzZWxlY3QgbmFtZT0iZGJuYW1lIj4NCgkJCXtEQVRBQkFTRVN9DQoJCTwvc2VsZWN0Pg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iQWNjZXNzIi8+DQoJPC9mb3JtPg0KCTxici8+PGJyLz4NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PWRiQWRtaW4mZnVuYz10YmxJbnRlcmFjdCIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJxdWVyeSIgdmFsdWU9IiIvPg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHZhbHVlPSJRdWVyeSIvPg0KCTwvZm9ybT48YnIvPg0KCTxzcGFuPntRVUVSWVNVQ0NFU1N9PC9zcGFuPg0KCTxici8+PGJyLz4NCgkJe1RBQkxFU30NCjwvZGl2Pg0K",
			"adminCP_dbAdmin_table.template" => "PGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1kYkFkbWluJmZ1bmM9dGJsSW50ZXJhY3QiIG1ldGhvZD0icG9zdCI+DQoJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0idGJsTmFtZSIgdmFsdWU9IntUQkxOQU1FfSIvPg0KCTx0YWJsZSBzdHlsZT0ibWFyZ2luLWJvdHRvbToyMHB4OyI+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSJ7TlVNQ09MU30iIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPntUQkxOQU1FfTwvdGQ+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCXtDT0xOQU1FU30gPCEtLS0gQUxURVIgVEFCTEUgLS0tPg0KCQk8L3RyPg0KCQk8dHI+DQoJCQl7VkFMVUVTfSA8IS0tLSBVUERBVEUvREVMRVRFIC0tLT4NCgkJPC90cj4NCgkJPHRyPg0KCQkJe0lOUFVUU30gPCEtLS0gSU5TRVJUUyAtLS0+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSJ7TlVNQ09MU30iIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPjxpbnB1dCB0eXBlPSJzdWJtaXQiIG5hbWU9InN1Ym1pdCIgc3R5bGU9IndpZHRoOjMwJTsiIHZhbHVlPSJJTlNFUlQiLz48aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHN0eWxlPSJ3aWR0aDozMCU7IiB2YWx1ZT0iVVBEQVRFIi8+PGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0ic3VibWl0IiBzdHlsZT0id2lkdGg6MzAlOyIgdmFsdWU9IkRFTEVURSIvPjwvdGQ+DQoJCTwvdHI+DQoJPC90YWJsZT4NCjwvZm9ybT4NCg==",
			"adminCP_login.template" => "PGRpdiBzdHlsZT0id2lkdGg6MTAwJTt0ZXh0LWFsaWduOmNlbnRlcjsiPg0KCXtMT0dJTlNVQ0NFU1N9DQoJPGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1sb2dpbiIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InVzZXJuYW1lIiB2YWx1ZT0iVXNlcm5hbWUiIG9uY2xpY2s9InRoaXMudmFsdWU9Jyc7Ii8+PGJyLz4NCgkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwYXNzd29yZCIgdmFsdWU9IlBhc3N3b3JkIiBvbmNsaWNrPSJ0aGlzLnZhbHVlPScnOyIvPjxici8+DQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJMb2dpbiI+DQoJPC9mb3JtPg0KPC9kaXY+DQo=",
			"adminCP_modAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4NCgk8dGFibGU+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSI0IiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij5BdmFpbGFibGUgTW9kdWxlczwvdGQ+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCTx0ZD5OYW1lOjwvdGQ+PHRkPkF1dGhvcjo8L3RkPjx0ZD5EYXRlIENyZWF0ZWQ6PC90ZD48dGQ+RW5hYmxlZDo8L3RkPg0KCQk8L3RyPg0KCQl7TU9EVUxFU30NCgk8L3RhYmxlPg0KCTxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9bW9kQWRtaW4mZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+DQoJCTxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJyZmlsZSIvPjxici8+DQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJVcGxvYWQiLz4NCgk8L2Zvcm0+DQo8L2Rpdj4NCg==",
			"adminCP_modAdmin_modules.template" => "PHRyPg0KCTx0ZD57TkFNRX08L3RkPjx0ZD57QVVUSE9SfTwvdGQ+PHRkPntEQVRFfTwvdGQ+PHRkPjxhIGhyZWY9IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PW1vZEFkbWluJmZ1bmM9dG9nZ2xlRW5hYmxlZCZtb2R1bGU9e01PREZJTEV9JmN1cnJlbnRTdGF0ZT17RU5BQkxFRH0iPntFTkFCTEVEfTwvYT48L3RkPg0KPC90cj4NCg==",
			"adminCP_templateAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTsiPg0NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PXRlbXBsYXRlQWRtaW4mZnVuYz1sb2FkIiBtZXRob2Q9InBvc3QiPg0NCgkJPHNlbGVjdCBuYW1lPSJmaWxlbmFtZSI+DQ0KCQkJPG9wdGlvbiB2YWx1ZT0iIj5DdXJyZW50IFRoZW1lIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7VEVNUEZJTEVTfQ0NCgkJCTxvcHRpb24gdmFsdWU9IiI+IDwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+TW9kdWxlIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7TU9EVEVNUEZJTEVTfQ0NCgkJCTxvcHRpb24gdmFsdWU9IiI+IDwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+Q3VzdG9tIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7Q1VTVE9NVEVNUExBVEVTfQ0NCgkJPC9zZWxlY3Q+PGJyLz4NDQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJFZGl0Ii8+DQ0KCTwvZm9ybT4NDQoJPGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10ZW1wbGF0ZUFkbWluIiBtZXRob2Q9InBvc3QiPg0NCgkJPHRleHRhcmVhIHN0eWxlPSJ3aWR0aDoxMDAlOyIgcm93cz0iMjAiIG5hbWU9ImZpbGVjb250ZW50Ij57RklMRUNPTlRFTlR9PC90ZXh0YXJlYT48YnIvPg0NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iZmlsZW5hbWUiIHZhbHVlPSJ7VEVNUEZJTEV9Ii8+DQ0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHZhbHVlPSJTYXZlIi8+PGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0ic3VibWl0IiB2YWx1ZT0iRGVsZXRlIi8+DQ0KCTwvZm9ybT4NDQo8L2Rpdj4NDQo=",
			"adminCP_testEnv.template" => "PGxpPg0Ke0RFUEVOREVOQ0lFU30NCjwvbGk+DQo=",
			"adminCP_themeMgr.template" => "PGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10aGVtZU1nciZmdW5jPXNldFRoZW1lIiBtZXRob2Q9InBvc3QiPg0KCTxzZWxlY3QgbmFtZT0iZmlsZW5hbWUiPg0Ke1RIRU1FU30NCgk8L3NlbGVjdD48YnIvPg0KCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJTZXQgVGhlbWUiLz4NCjwvZm9ybT4NCjxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9dGhlbWVNZ3ImZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+DQoJPGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9InJmaWxlIi8+PGJyLz4NCgk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iVXBsb2FkIFRoZW1lIi8+DQo8L2Zvcm0+DQo=",
			"adminCP_welcome.template" => "V2VsY29tZSB0byB0aGUgU2ltcGxlU2l0ZSBhZG1pbmlzdHJhdG9yIGNvbnRyb2wgcGFuZWwuICBQbGVhc2Ugc2VsZWN0IGEgc2VjdGlvbiBmcm9tIHRoZSBsZWZ0Lg0K",
			"adminCP_widgetAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4KCTxmb3JtIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9d2lkZ2V0QWRtaW4mZnVuYz1kZWxldGUiIG1ldGhvZD0icG9zdCI+CgkJPHRhYmxlPgoJCQk8dHI+CgkJCQk8dGQgY29sc3Bhbj0iMyIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+V2lkZ2V0cyBBdmFpbGFibGU8L3RkPgoJCQk8L3RyPgoJCQk8dHI+CgkJCQk8dGQ+TmFtZTo8L3RkPjx0ZD5UZW1wbGF0ZSBDb25zdGFudDo8L3RkPjx0ZD5EYXRlIEFkZGVkOjwvdGQ+CgkJCTwvdHI+CgkJCXtXSURHRVRTfQoJCQk8dHI+CgkJCQk8dGQgY29sc3Bhbj0iMyIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+PGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IkRlbGV0ZSIvPjwvdGQ+CgkJCTwvdHI+CgkJPC90YWJsZT4KCTwvZm9ybT4KCTxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9d2lkZ2V0QWRtaW4mZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+CgkJPGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9InJmaWxlIi8+PGJyLz4KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iVXBsb2FkIi8+Cgk8L2Zvcm0+CjwvZGl2Pgo=",
			"adminCP.template" => "CQkJCQk8ZGl2IGlkPSJtYWluY29udGVudCIgc3R5bGU9IndpZHRoOjgwJTtmbG9hdDpyaWdodDsiPg0NCgkJCQkJCXtBQ1RJT05QQUdFfQ0NCgkJCQkJPC9kaXY+DQ0KCQkJCQk8ZGl2IGlkPSJvcHRpb25zIiBzdHlsZT0id2lkdGg6MjAlOyI+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9Y29uZmlnQWRtaW4iPkNvbmZpZ3VyYXRpb25zPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9ZGJBZG1pbiI+RGF0YWJhc2UgQWRtaW48L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1tb2RBZG1pbiI+TW9kdWxlIEFkbWluPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9dGVtcGxhdGVBZG1pbiI+VGVtcGxhdGUgQWRtaW48L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10aGVtZU1nciI+VGhlbWUgTWFuYWdlcjwvYT48YnIvPg0NCgkJCQkJCTxhIGhyZWY9IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PXRlc3RFbnYiPlRlc3QgRW52aXJvbm1lbnQ8L2E+PGJyLz4NDQoJCQkJCQk8YSBocmVmPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD13aWRnZXRBZG1pbiI+V2lkZ2V0IEFkbWluPC9hPjxici8+DQ0KCQkJCQkJPGEgaHJlZj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9bG9nb3V0Ij5Mb2dvdXQ8L2E+DQ0KCQkJCQk8L2Rpdj4NDQo=",
			"adminCP_configAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTsiPg0KCTxzcGFuPjxiPkJlIHZlcnkgY2FyZWZ1bCB3aGVuIGVkaXRpbmcgdGhpcyBmaWxlLCBpZiB5b3UgZG8gc29tZXRoaW5nIHdyb25nIHlvdSBjb3VsZCBicmVhayB0aGUgYWRtaW5pc3RyYXRpdmUgY29udHJvbCBwYW5lbC48L2I+PC9zcGFuPg0KCTxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1jb25maWdBZG1pbiZmdW5jPXNhdmUiPg0KCQk8dGV4dGFyZWEgbmFtZT0iZmlsZWNvbnRlbnQiIHN0eWxlPSJ3aWR0aDoxMDAlOyIgcm93cz0iMjAiPntGSUxFQ09OVEVOVH08L3RleHRhcmVhPg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iU2F2ZSIvPg0KCTwvZm9ybT4NCjwvZGl2Pg0K",
			"adminCP_dbAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PWRiQWRtaW4mZnVuYz1kYlNlbGVjdCIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJCTxzZWxlY3QgbmFtZT0iZGJuYW1lIj4NCgkJCXtEQVRBQkFTRVN9DQoJCTwvc2VsZWN0Pg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iQWNjZXNzIi8+DQoJPC9mb3JtPg0KCTxici8+PGJyLz4NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PWRiQWRtaW4mZnVuYz10YmxJbnRlcmFjdCIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJxdWVyeSIgdmFsdWU9IiIvPg0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHZhbHVlPSJRdWVyeSIvPg0KCTwvZm9ybT48YnIvPg0KCTxzcGFuPntRVUVSWVNVQ0NFU1N9PC9zcGFuPg0KCTxici8+PGJyLz4NCgkJe1RBQkxFU30NCjwvZGl2Pg0K",
			"adminCP_dbAdmin_table.template" => "PGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1kYkFkbWluJmZ1bmM9dGJsSW50ZXJhY3QiIG1ldGhvZD0icG9zdCI+DQoJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY3VyZGIiIHZhbHVlPSJ7Q1VSREJ9Ii8+DQoJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0idGJsTmFtZSIgdmFsdWU9IntUQkxOQU1FfSIvPg0KCTx0YWJsZSBzdHlsZT0ibWFyZ2luLWJvdHRvbToyMHB4OyI+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSJ7TlVNQ09MU30iIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPntUQkxOQU1FfTwvdGQ+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCXtDT0xOQU1FU30gPCEtLS0gQUxURVIgVEFCTEUgLS0tPg0KCQk8L3RyPg0KCQk8dHI+DQoJCQl7VkFMVUVTfSA8IS0tLSBVUERBVEUvREVMRVRFIC0tLT4NCgkJPC90cj4NCgkJPHRyPg0KCQkJe0lOUFVUU30gPCEtLS0gSU5TRVJUUyAtLS0+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSJ7TlVNQ09MU30iIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPjxpbnB1dCB0eXBlPSJzdWJtaXQiIG5hbWU9InN1Ym1pdCIgc3R5bGU9IndpZHRoOjMwJTsiIHZhbHVlPSJJTlNFUlQiLz48aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHN0eWxlPSJ3aWR0aDozMCU7IiB2YWx1ZT0iVVBEQVRFIi8+PGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0ic3VibWl0IiBzdHlsZT0id2lkdGg6MzAlOyIgdmFsdWU9IkRFTEVURSIvPjwvdGQ+DQoJCTwvdHI+DQoJPC90YWJsZT4NCjwvZm9ybT4NCg==",
			"adminCP_login.template" => "PGRpdiBzdHlsZT0id2lkdGg6MTAwJTt0ZXh0LWFsaWduOmNlbnRlcjsiPg0KCXtMT0dJTlNVQ0NFU1N9DQoJPGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD1sb2dpbiIgbWV0aG9kPSJwb3N0Ij4NCgkJPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InVzZXJuYW1lIiB2YWx1ZT0iVXNlcm5hbWUiIG9uY2xpY2s9InRoaXMudmFsdWU9Jyc7Ii8+PGJyLz4NCgkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwYXNzd29yZCIgdmFsdWU9IlBhc3N3b3JkIiBvbmNsaWNrPSJ0aGlzLnZhbHVlPScnOyIvPjxici8+DQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJMb2dpbiI+DQoJPC9mb3JtPg0KPC9kaXY+DQo=",
			"adminCP_modAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4NCgk8dGFibGU+DQoJCTx0cj4NCgkJCTx0ZCBjb2xzcGFuPSI0IiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij5BdmFpbGFibGUgTW9kdWxlczwvdGQ+DQoJCTwvdHI+DQoJCTx0cj4NCgkJCTx0ZD5OYW1lOjwvdGQ+PHRkPkF1dGhvcjo8L3RkPjx0ZD5EYXRlIENyZWF0ZWQ6PC90ZD48dGQ+RW5hYmxlZDo8L3RkPg0KCQk8L3RyPg0KCQl7TU9EVUxFU30NCgk8L3RhYmxlPg0KCTxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9bW9kQWRtaW4mZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+DQoJCTxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJyZmlsZSIvPjxici8+DQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJVcGxvYWQiLz4NCgk8L2Zvcm0+DQo8L2Rpdj4NCg==",
			"adminCP_modAdmin_modules.template" => "PHRyPg0KCTx0ZD57TkFNRX08L3RkPjx0ZD57QVVUSE9SfTwvdGQ+PHRkPntEQVRFfTwvdGQ+PHRkPjxhIGhyZWY9IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PW1vZEFkbWluJmZ1bmM9dG9nZ2xlRW5hYmxlZCZtb2R1bGU9e01PREZJTEV9JmN1cnJlbnRTdGF0ZT17RU5BQkxFRH0iPntFTkFCTEVEfTwvYT48L3RkPg0KPC90cj4NCg==",
			"adminCP_templateAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTsiPg0NCgk8Zm9ybSBhY3Rpb249IntDT05GSUdTX3BhdGhfcm9vdH0/bW9kPWFkbWluQ1AmYWN0PXRlbXBsYXRlQWRtaW4mZnVuYz1sb2FkIiBtZXRob2Q9InBvc3QiPg0NCgkJPHNlbGVjdCBuYW1lPSJmaWxlbmFtZSI+DQ0KCQkJPG9wdGlvbiB2YWx1ZT0iIj5DdXJyZW50IFRoZW1lIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7VEVNUEZJTEVTfQ0NCgkJCTxvcHRpb24gdmFsdWU9IiI+IDwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+TW9kdWxlIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7TU9EVEVNUEZJTEVTfQ0NCgkJCTxvcHRpb24gdmFsdWU9IiI+IDwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+Q3VzdG9tIFRlbXBsYXRlczwvb3B0aW9uPg0NCgkJCTxvcHRpb24gdmFsdWU9IiI+PT09PT08L29wdGlvbj4NDQoJCQl7Q1VTVE9NVEVNUExBVEVTfQ0NCgkJPC9zZWxlY3Q+PGJyLz4NDQoJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJFZGl0Ii8+DQ0KCTwvZm9ybT4NDQoJPGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10ZW1wbGF0ZUFkbWluIiBtZXRob2Q9InBvc3QiPg0NCgkJPHRleHRhcmVhIHN0eWxlPSJ3aWR0aDoxMDAlOyIgcm93cz0iMjAiIG5hbWU9ImZpbGVjb250ZW50Ij57RklMRUNPTlRFTlR9PC90ZXh0YXJlYT48YnIvPg0NCgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iZmlsZW5hbWUiIHZhbHVlPSJ7VEVNUEZJTEV9Ii8+DQ0KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJzdWJtaXQiIHZhbHVlPSJTYXZlIi8+PGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0ic3VibWl0IiB2YWx1ZT0iRGVsZXRlIi8+DQ0KCTwvZm9ybT4NDQo8L2Rpdj4NDQo=",
			"adminCP_testEnv.template" => "PGxpPg0Ke0RFUEVOREVOQ0lFU30NCjwvbGk+DQo=",
			"adminCP_themeMgr.template" => "PGZvcm0gYWN0aW9uPSJ7Q09ORklHU19wYXRoX3Jvb3R9P21vZD1hZG1pbkNQJmFjdD10aGVtZU1nciZmdW5jPXNldFRoZW1lIiBtZXRob2Q9InBvc3QiPg0KCTxzZWxlY3QgbmFtZT0iZmlsZW5hbWUiPg0Ke1RIRU1FU30NCgk8L3NlbGVjdD48YnIvPg0KCTxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJTZXQgVGhlbWUiLz4NCjwvZm9ybT4NCjxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9dGhlbWVNZ3ImZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+DQoJPGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9InJmaWxlIi8+PGJyLz4NCgk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iVXBsb2FkIFRoZW1lIi8+DQo8L2Zvcm0+DQo=",
			"adminCP_welcome.template" => "V2VsY29tZSB0byB0aGUgU2ltcGxlU2l0ZSBhZG1pbmlzdHJhdG9yIGNvbnRyb2wgcGFuZWwuICBQbGVhc2Ugc2VsZWN0IGEgc2VjdGlvbiBmcm9tIHRoZSBsZWZ0Lg0K",
			"adminCP_widgetAdmin.template" => "PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4KCTxmb3JtIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9d2lkZ2V0QWRtaW4mZnVuYz1kZWxldGUiIG1ldGhvZD0icG9zdCI+CgkJPHRhYmxlPgoJCQk8dHI+CgkJCQk8dGQgY29sc3Bhbj0iMyIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+V2lkZ2V0cyBBdmFpbGFibGU8L3RkPgoJCQk8L3RyPgoJCQk8dHI+CgkJCQk8dGQ+TmFtZTo8L3RkPjx0ZD5UZW1wbGF0ZSBDb25zdGFudDo8L3RkPjx0ZD5EYXRlIEFkZGVkOjwvdGQ+CgkJCTwvdHI+CgkJCXtXSURHRVRTfQoJCQk8dHI+CgkJCQk8dGQgY29sc3Bhbj0iMyIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+PGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IkRlbGV0ZSIvPjwvdGQ+CgkJCTwvdHI+CgkJPC90YWJsZT4KCTwvZm9ybT4KCTxmb3JtIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiIGFjdGlvbj0ie0NPTkZJR1NfcGF0aF9yb290fT9tb2Q9YWRtaW5DUCZhY3Q9d2lkZ2V0QWRtaW4mZnVuYz11cGxvYWQiIG1ldGhvZD0icG9zdCI+CgkJPGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9InJmaWxlIi8+PGJyLz4KCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iVXBsb2FkIi8+Cgk8L2Zvcm0+CjwvZGl2Pgo="
		);
		
		$this->installReqFiles($defaultFiles,$configs);
		$this->installReqTbls($defaultTbls,$configs);
		$dbconf=$configs["database"];
		$conn=@mysql_connect($dbconf["host"],$dbconf["username"],$dbconf["password"]);
		mysql_select_db($dbconf["database"]);
		mysql_query("INSERT INTO ${dbconf['tbl_prefix']}admins (`username`,`passwd`) VALUES ('admin','21232f297a57a5a743894a0e4a801fc3');");
		mysql_close($conn);
		return TRUE;
	}
	public function getContent($configs=array(),$actionpage="")
	{
		if($_SESSION['is_admin']==1)
			return $this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']."/adminCP.template","adminCP");
		else
			return $this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']."/adminCP_login.template","adminCP");
	}
	public function getActionPage($configs)
	{
		switch($_GET['act'])
		{
			case "configAdmin":
				return $this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']."/adminCP_configAdmin.template","adminCP");
			case "dbAdmin":
				return $this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']."/adminCP_dbAdmin.template","adminCP");
			case "modAdmin":
				return $this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']."/adminCP_modAdmin.template","adminCP");
			case "templateAdmin":
				return $this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']."/adminCP_templateAdmin.template","adminCP");
			case "themeMgr":
				return $this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']."/adminCP_themeMgr.template","adminCP");
			case "testEnv":
				return $this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']."/adminCP_testEnv.template","adminCP");
			case "widgetAdmin":
				return $this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']."/adminCP_widgetAdmin.template","adminCP");
			default:
				return $this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']."/adminCP_welcome.template","adminCP");
		}
		return "";
	}
	public function uninstall()
	{
		return TRUE;
	}
	
	function recursiveDirDelete($curdir="/tmp/",$depth=0)
	{
		$dir=@opendir($curdir);
		while(@($file=readdir($dir)))
		{
			if(is_dir($curdir."/".$file) and !($file=="." or $file=="..") and !(is_link("$curdir/$file"))) // Linked parent directories, .., and . create endless loops
			{
				if(!(@rmdir("$curdir/$file")))
				{
					$this->recursiveDirDelete("$curdir/$file",$depth+1);
					@rmdir("$curdir/$file");
				}
			}
			else
				@unlink("$curdir/$file");
		}
		@rmdir($curdir);
	}
	function recursiveDirCopy($curdir="/tmp/",$newdir="./")
	{
		if(!(is_dir($newdir)))
		{
			@unlink($newdir);
			@mkdir($newdir);
		}
		$dir=@opendir($curdir);
		while(($file=@readdir($dir)))
		{
			if(is_dir($curdir."/".$file) and !($file=="." or $file=="..") and !(is_link("$curdir/$file")))
			{
				@mkdir("$newdir/$file");
				$this->recursiveDirCopy("$curdir/$file",$newdir."/$file");
			}
			else if(!($file=="." or $file==".."))
			{
				@copy("$curdir/$file",$newdir."/$file");
			}
		}
	}
	function createDirTree($curdir="./",$maxdepth=-1,$depth=0)
	{
		$tree=array();
		$dir=opendir($curdir);
		while(@($file=readdir($dir)) and ($depth!=$maxdepth))
			if(is_dir($curdir."/".$file) and !($file=="." or $file=="..") and !(is_link("$curdir/$file")))
				$tree[$file]=$this->createDirTree("$curdir/$file",$maxdepth,$depth+1);
			else
				if($file!="." && $file!="..")
					$tree[$file]=$file;
		ksort($tree,SORT_STRING);
		return $tree;
	}
	function genDirTreeOut($tree,$curdir="./",$depthdelim="\t",$template="{DEPTH}* {FILE}\n",$dirdisplay="[DIR] ",$type=0,$prevdirs="",$depth=0)
	{
		$output="";
		if(is_array($tree))
			foreach($tree as $k=>$v)
				if(is_dir("$curdir/$k") and !(is_link("$curdir/$k")))
				{
					include("includes/config.inc.php");
					$output.=str_replace("{TYPE}","${type}_",str_replace("{PREVDIRS}",$prevdirs,str_replace("{SELECTED}",(@($configs['filename']=="${type}_${prevdirs}${k}")?" selected=\"selected\"":(($type==2 && $k==$configs['default_theme'])?" selected=\"selected\"":"")),str_replace("{DEPTH}",str_repeat($depthdelim,$depth),str_replace("{FILE}",$dirdisplay.$this->simpleFilter($k,0),$template)).$this->genDirTreeOut($tree[$k],"$curdir/$k",$depthdelim,$template,$dirdisplay,$type,$prevdirs."${k}/",$depth+1))));
				}
				else
					if(!(is_link("$curdir/$k")))
						$output.=str_replace("{TYPE}","${type}_",str_replace("{PREVDIRS}",$prevdirs,str_replace("{SELECTED}",(@($_POST['filename']=="${type}_${prevdirs}${k}")?" selected=\"selected\"":""),str_replace("{DEPTH}",str_repeat($depthdelim,$depth),str_replace("{FILE}",$this->simpleFilter($k,0),$template)))));
		return $output;
	}
	
	// Config File Administration
	public function configAdmin($content,$configs)
	{
		if(@($_GET['func'])=="save")
		{
			$f=@fopen($_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/config.inc.php","w");
			@fwrite($f,$_POST['filecontent']);
			@fclose($f);
		}
		return str_replace("{FILECONTENT}",str_replace("{","&#123;",str_replace("}","&#125;",htmlspecialchars(file_get_contents($_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/config.inc.php")))),$content);
	}
	
	// Database Administration
	public function dbAdmin($content,$configs)
	{
		$conn=@mysql_connect($configs['database']['host'],$configs['database']['username'],$configs['database']['password']);
		switch($_GET['func'])
		{
			case "dbSelect":
				$_POST['curdb']=$_POST['dbname'];
				break;
			case "tblInteract":
				switch($_POST['submit'])
				{
					case "INSERT":
						if($GLOBALS["funcsperformed"]==0)
						{
							$GLOBALS["funcsperformed"]++;
							$keys=array_keys($_POST);
							$inserts=preg_grep("/insert_(.*)/si",$keys);
							$query="INSERT INTO `".$_POST['curdb']."`.`".$_POST['tblName']."` (";
							$arrlen=count($inserts);
							$curkey=0;
							foreach($inserts as $key)
							{
								preg_match("/insert_(.*)/si",$key,$match);
								if($match[1]!="")
									$query.="`${match[1]}`".((++$curkey<$arrlen)?",":"");
							}
							$query.=") VALUES (";
							$curkey=0;
							foreach($inserts as $key)
							{
								preg_match("/insert_(.*)/si",$key,$match);
								if($match[1]!="")
									$query.="'".mysql_real_escape_string($_POST[$match[0]])."'".((++$curkey<$arrlen)?",":"");
							}
							$query.=");";
							@mysql_query($query);
						}
						break;
					case "DELETE":
						if($GLOBALS["funcsperformed"]==0)
						{
							$GLOBALS["funcsperformed"]++;
							$keys=array_keys($_POST);
							$deletes=preg_grep("/delete_(.*)/si",$keys);
							$query="DELETE FROM `".$_POST['curdb']."`.`".$_POST['tblName']."` WHERE ";
							$arrlen=count($deletes);
							$curkey=0;
							foreach($deletes as $key)
							{
								preg_match("/delete_(.*)_(.*)/si",$key,$match);
								if($match[1]!="" && $match[2]!="")
									$query.="`${match[1]}`='${match[2]}'".((++$curkey<$arrlen)?" OR ":"");
							}
							$query.=";";
							@mysql_query($query);
						}
						break;
					case "UPDATE":
						if($GLOBALS["funcsperformed"]==0)
						{
							$GLOBALS["funcsperformed"]++;
							$updates=array();
							
							// Check for changes
							$keys=array_keys($_POST);
							$updateKeys=preg_grep("/update_(.*)/si",$keys);
							foreach($updateKeys as $updateKey)
							{
								preg_match("/update_(.*)_(.*)_(.*)_(.*)/si",$updateKey,$match);
								if($match[1]!="" && $match[2]!="" && $match[3]!="")
								{
									$primaryKey=$match[1];
									if($match[4]!=$_POST[$match[0]])
										$updates[$match[2]][$match[3]]=$_POST[$match[0]];
								}
							}
							
							// Execute changes
							$keys=array_keys($updates);
							foreach($keys as $key)
							{
								$x=0;
								$cKeys=array_keys($updates[$key]);
								$max=count($cKeys);
								$query="UPDATE `".$_POST['curdb']."`.`".$_POST['tblName']."` SET ";
								foreach($updates[$key] as $ck=>$cv)
									$query.="`$ck`='$cv'".(($x++<$max-1)?",":"");
								$query.=" WHERE `$primaryKey`='$key';";
								@mysql_query($query);
							}
						}
						break;
					case "Query":
						if($GLOBALS["funcsperformed"]==0)
						{
							$GLOBALS["funcsperformed"]++;
							$querysuccess=@mysql_query($_POST['query']);
							$GLOBALS["mysqlsuccess"]=($querysuccess==FALSE)?mysql_error():"Query successful.";
						}
						else
							$content=str_replace("{QUERYSUCCESS}",$GLOBALS["mysqlsuccess"],$content);
						break;
				}
		}
		$content=str_replace("{CURDB}",$_POST['curdb'],$content);
		$databases="";
		$res=@mysql_query("SHOW DATABASES;");
		while(($row=mysql_fetch_array($res)))
			$databases.="<option value=\"${row[0]}\"".(($row[0]==$_POST['curdb'])?" selected=\"selected\"":"").">${row[0]}</option>";
		$content=str_replace("{DATABASES}",$databases,$content);
		$tables=array();
		$subcontent="";
		if($_POST['curdb']!="")
		{
			mysql_select_db($_POST['curdb']);
			
			// Get table names
			$res=@mysql_query("SHOW TABLES;");
			while(($row=mysql_fetch_array($res)))
			{
				// Create a new table based on information retrieved
				$subcontent.=file_get_contents($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']."/adminCP_dbAdmin_table.template");
				$numcols=0;
				$colnames="";
				$currow=0;
				$curcol=0;
				$numrows=0;
				$values="";
				$inputs="";
				$primaryKey=array();
				$columns=array();
				
				// Get column names
				$res2=@mysql_query("SHOW COLUMNS IN `${row[0]}`;");
				while(($row2=mysql_fetch_array($res2)) && ++$numcols)
				{
					$tables[$row[0]][$row2[0]]=array();
					$columns[]=$row2[0];
					$colnames.="<td>${row2[0]}</td>";
					if($row2[3]=="PRI")
						$primaryKey[]=$numcols-1;
				}
				
				// Get values
				$res2=@mysql_query("SELECT * FROM `${row[0]}`;");
				while(($row2=mysql_fetch_array($res2)) && ++$numrows)
					foreach($row2 as $k=>$v)
						$tables[$row[0]][$k][]=$v;
				
				while($currow<$numrows)
				{
					while($curcol<$numcols)
						$values.="<td>".((in_array($curcol,$primaryKey))?"<input type=\"checkbox\" name=\"delete_${columns[$curcol]}_".htmlspecialchars($tables[$row[0]][$curcol][$currow])."\" value=\"".htmlspecialchars($tables[$row[0]][$curcol][$currow])."\">":"")."<input type=\"text\" style=\"width:70%;float:right;\" name=\"update_".$columns[$primaryKey[0]]."_".$tables[$row[0]][$primaryKey[0]][$currow]."_".$columns[$curcol]."_".htmlspecialchars($tables[$row[0]][$curcol][$currow])."\" value=\"".htmlspecialchars($tables[$row[0]][$curcol++][$currow])."\"/></td>";
					$curcol=0;
					$values.=(($currow+1<$numrows)?"</tr><tr>":"");
					$currow++;
				}
				
				// Prepare INSERT
				$curcol=0;
				foreach($tables[$row[0]] as $k=>$v)
					if(++$curcol<=$numcols)
						$inputs.="<td><input style=\"width:70%;float:right;\" type=\"text\" name=\"insert_$k\"/></td>";
				// Do replacements
				$subcontent=str_replace("{NUMCOLS}",$numcols,$subcontent);
				$subcontent=str_replace("{TBLNAME}",$row[0],$subcontent);
				$subcontent=str_replace("{COLNAMES}",$colnames,$subcontent);
				$subcontent=str_replace("{VALUES}",$values,$subcontent);
				$subcontent=str_replace("{INPUTS}",$inputs,$subcontent);
				$subcontent=str_replace("{CURDB}",$_POST['curdb'],$subcontent);
			}
		}
		$content=str_replace("{TABLES}",$subcontent,$content);
		return $content;
	}
	
	// Module Administration
	public function modAdmin($content,$configs)
	{
		if(@($_GET['func'])=="toggleEnabled")
			$this->toggleMod(@($_GET['module']),@($_GET['currentState']),$configs);
		else if(@($_GET['func'])=="upload")
			$this->uploadMod($configs);
		$modulestext="";
		$modsAvailable=array("enabled"=>$this->loadModules(),"disabled"=>$this->loadModules(0));
		sort($modsAvailable["enabled"]);
		sort($modsAvailable["disabled"]);
		return str_replace("{MODULES}",$this->mods2Feed($modsAvailable,$configs),$content);
	}
	public function mods2Feed($modsAvailable,$configs)
	{
		$feed="";
		$x=0;
		foreach($modsAvailable as $mods)
		{
			$x++;
			foreach($mods as $mod)
			{
				$f=@fopen($_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"].$configs["path"]["mod_templates"]."/adminCP_modAdmin_modules.template","r");
				while(($line=fgets($f)))
					$feed.=$line;
				$feed=str_replace("{MODFILE}",$mod,$feed);
				$feed=str_replace("{NAME}",((isset($mod::$info))?((isset($mod::$info["name"]))?$mod::$info["name"]:$mod):$mod),$feed);
				$feed=str_replace("{AUTHOR}",((isset($mod::$info))?((isset($mod::$info["author"]))?$mod::$info["author"]:"No data..."):"No data..."),$feed);
				$feed=str_replace("{DATE}",((isset($mod::$info))?((isset($mod::$info["date"]))?$mod::$info["date"]:"No data..."):"No data..."),$feed);
				$feed=str_replace("{ENABLED}",(($x==1)?"Yes":"No"),$feed);
			}
		}
		return $feed;
	}
	public function toggleMod($module,$currentState,$configs)
	{
		$file=$_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/mods/".((strtolower($currentState)=="yes")?"enabled":"disabled")."/$module.mod.php";
		$newfile=$_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/mods/".((strtolower($currentState)=="yes")?"disabled":"enabled")."/$module.mod.php";
		if(is_file($file))
			if(copy($file,$newfile))
				unlink($file);
	}
	public function uploadMod($configs)
	{
		$error=0;
		$zipname=$_FILES['rfile']['name'];
		$tmpname=$_FILES['rfile']['tmp_name'];
		if(preg_match("/([^\/])*.zip/si",$zipname,$match) && $match[0]!="")
			$modname=str_replace(".zip","",$match[0]);
		else $error=1;
		$extractDir=$configs['path']['tmpdir']."/$modname";
		$zip=new ZipArchive();
		if($zip->open($tmpname) && $error==0)
		{
			$zip->extractTo($extractDir);
			$zip->close();
			if(is_dir("$extractDir/includes") && is_dir("$extractDir/templates"))
			{
				if(is_file("$extractDir/includes/$modname.mod.php"))
				{
					if(copy("$extractDir/includes/$modname.mod.php",$_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/mods/disabled/$modname.mod.php"))
						unlink("$extractDir/includes/$modname.mod.php");
					else $error=1;
				}
				else $error=1;
			}
			else $error=1;
			if(is_dir("$extractDir/templates"))
				$this->recursiveDirCopy("$extractDir/templates",$_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates']);
			else $error=1;
			$this->recursiveDirDelete($extractDir);
		}
		else $error=1;
		return $error;
	}
	
	// Template Administration
	public function templateAdmin($content,$configs)
	{
		$basedir=$_SERVER['DOCUMENT_ROOT'].$configs["path"]["root"];
		if($_POST['submit']=="Save")
		{
			$f=@fopen(((preg_match("/([0-9])_(.*)/si",@($_POST['filename']),$match) && $match)?(($match[1]==0)?$basedir.$configs['path']['templates']."/${match[2]}":$basedir.$configs['path']['mod_templates']."/${match[2]}"):""),"w");
			@fwrite($f,$_POST['filecontent']);
			@fclose($f);
		}
		$content=str_replace("{TEMPFILES}",$this->genDirTreeOut($this->createDirTree($basedir.$configs['path']['templates']),$basedir.$configs['path']['templates'],"&nbsp;&nbsp;","<option value=\"{TYPE}{PREVDIRS}{FILE}\"{SELECTED}>{DEPTH}{FILE}</option>\n","[DIR] ",0,"",1),$content);
		$content=str_replace("{MODTEMPFILES}",$this->genDirTreeOut($this->createDirTree($basedir.$configs['path']['mod_templates']),$basedir.$configs['path']['mod_templates'],"&nbsp;&nbsp;","<option value=\"{TYPE}{PREVDIRS}{FILE}\"{SELECTED}>{DEPTH}{FILE}</option>\n","[DIR] ",1,"",1),$content);
		$content=str_replace("{TEMPFILE}",@$_POST['filename'],$content);
		$content=str_replace("{FILECONTENT}",((preg_match("/([0-9])_(.*)/si",@($_POST['filename']),$match) && $match)?(($match[1]==0)?$this->simpleFilter(file_get_contents($basedir.$configs['path']['templates']."/${match[2]}"),0):$this->simpleFilter(file_get_contents($basedir.$configs['path']['mod_templates']."/${match[2]}"),0)):""),$content);
		return $content;
	}
	
	// Widget Administration
	public function widgetAdmin($content,$configs)
	{
		switch($_GET['func'])
		{
			case "delete":
				$this->delWidget($configs);
				break;
			case "upload":
				$this->uploadWidget($configs);
				break;
		}
		$widgetsTxt="";
		$widgetsArr=array();
		$widgetsDir=$_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/widgets/";
		$dir=opendir($widgetsDir);
		while(@($file=readdir($dir)))
			if(preg_match("/(.*)\.widget\.php$/si",$file,$matches) && (@$matches))
				$widgetsArr[]=$matches[1];
		foreach($widgetsArr as $widget)
			$widgetsTxt.="<tr><td><input type=\"checkbox\" name=\"delete_".htmlspecialchars($widget)."\" value=\"".htmlspecialchars($widget)."\"/>$widget</td><td>&#123;WIDGET_$widget&#125;</td><td>".date("m/d/Y",filemtime($widgetsDir.$widget.".widget.php"))."</td></tr>";
		return str_replace("{WIDGETS}",$widgetsTxt,$content);
	}
	public function delWidget($configs)
	{
		$keys=array_keys($_POST);
		$delKeys=preg_grep("/delete_(.*)/si",$keys);
		foreach($delKeys as $delKey)
		{
			preg_match("/delete_(.*)/si",$delKey,$matches);
			$widgetname=$matches[1];
			$widget=$_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/widgets/$widgetname.widget.php";
			@unlink($widget);
		}
	}
	public function uploadWidget($configs)
	{
		$error=0;
		$filename=$_FILES['rfile']['name'];
		$tmpname=$_FILES['rfile']['tmp_name'];
		if(preg_match("/([^\/])*.widget.php/si",$filename,$match) && $match[0]!="")
			$widgetname=str_replace(".widget.php","",$match[0]);
		else $error=1;
		if(copy($tmpname,$_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/widgets/$widgetname.widget.php"))
			unlink($tmpname);
		else $error=1;
		return $error;
	}

	
	// Theme Management
	public function themeMgr($content,$configs)
	{
		$content=str_replace("{THEMES}",$this->genDirTreeOut($this->createDirTree($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['themes'],1),$_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['themes'],"&nbsp","<option value=\"{FILE}\"{SELECTED}>{FILE}</option><br/>","",2),$content);
		if($_GET['func']=="setTheme")
		{
			$origconfig=file_get_contents($_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/config.inc.php");
			$f=@fopen($_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/config.inc.php","w");
			@fwrite($f,str_replace("\$configs[\"default_theme\"]=\"${configs['default_theme']}\";","\$configs[\"default_theme\"]=\"${_POST['filename']}\";",$origconfig));
			@fclose($f);
			include("includes/config.inc.php");
			$_GET=array("act"=>"themeMgr");
			$_POST=array();
			$content=$this->readTemplate($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['templates']."/overall.template","adminCP");
		}
		else if($_GET['func']=="upload")
		{
			$error=0;
			$zipname=$_FILES['rfile']['name'];
			$tmpname=$_FILES['rfile']['tmp_name'];
			if(preg_match("/([^\/])*.zip/si",$zipname,$match) && $match[0]!="")
				$themename=str_replace(".zip","",$match[0]);
			else $error=1;
			$extractDir=$configs['path']['tmpdir']."/$themename";
			$zip=new ZipArchive();
			if($zip->open($tmpname) && $error==0)
			{
				$zip->extractTo($extractDir);
				$zip->close();
				if(is_dir("$extractDir/$themename"))
				{
					$this->recursiveDirCopy($extractDir,$_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['themes']);
				}
			}
		}
		return $content;
	}
	
	// Test Environment
	function testEnvironment($content,$configs)
	{
		$results=array();
		$conn=@mysql_connect($ss->host,$ss->user,$ss->pass);
		if(!(is_dir($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['templates'])))
			$results[]="<ul>Templates directory does not exist.  How are you seeing this?";
		if(!(is_dir($_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/mods/")))
			$results[]="<ul>Modules directory does not exist, therefore no mods will be used.";
		if(!(is_file($_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/config.inc.php"))) // Check if config file exists, if not flag it
			$results[]="<ul>Configuration file does not exist.";
		if(!(@mysql_connect($configs['database']['host'],$configs['database']['username'],$configs['database']['password']))) // Check if the MySQL credentials are correct, if not flag it
			$results[]="<ul>MySQL credentials are incorrect.";
		if(!(class_exists("ZipArchive"))) // Check if ZipArchive is installed, if not flag it
			$results[]="<ul>ZipArchive is not installed, you will not be able to upload templates or modules.";
		if(!(is_writable($_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/config.inc.php")))
			$results[]="<ul>Config file is not writable, you will not be able to edit it from the admin control panel.";
		if(!(is_writable($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['themes'])))
			$results[]="<ul>Theme directory is not writable, you will not be able to upload new themes.";
		if(!(is_writable($_SERVER['DOCUMENT_ROOT'].$configs['path']['root'].$configs['path']['mod_templates'])))
			$results[]="<ul>Module templates directory is not writable, any modules you upload will not have the required templates.";
		if(!(is_writable($_SERVER['DOCUMENT_ROOT'].$configs['path']['root']."includes/mods")))
			$results[]="<ul>Modules directory is not writable, you will not be able to upload any modules.";
		@mysql_close($conn);
		if($results==array())
			$results[]="No dependency or file permission errors, everything should work fine.";
		return str_replace("{DEPENDENCIES}",implode("</ul>",$results),$content);
	}
}
?>